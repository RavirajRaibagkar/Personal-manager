{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/Persnl/src/pages/Dashboard.tsx"],"sourcesContent":["'use client';\r\nimport { useEffect, useState } from 'react';\r\nimport { supabase } from '../lib/supabase';\r\nimport {\r\n    BarChart,\r\n    Bar,\r\n    XAxis,\r\n    YAxis,\r\n    CartesianGrid,\r\n    Tooltip,\r\n    ResponsiveContainer,\r\n    PieChart,\r\n    Pie,\r\n    Cell,\r\n    Legend\r\n} from 'recharts';\r\nimport {\r\n    TrendingUp,\r\n    CheckCircle2,\r\n    Zap,\r\n    Wallet,\r\n    ArrowDownCircle,\r\n    ArrowUpCircle\r\n} from 'lucide-react';\r\nimport { cn, formatCurrency } from '../lib/utils';\r\n\r\nexport default function Dashboard() {\r\n    const [stats, setStats] = useState({\r\n        totalIncome: 0,\r\n        totalExpenses: 0,\r\n        activeTasks: 0,\r\n        mealsToday: 0,\r\n        completionRate: 0\r\n    });\r\n\r\n    const [expenseData, setExpenseData] = useState<any[]>([]);\r\n    const [flowData, setFlowData] = useState<any[]>([]);\r\n\r\n    useEffect(() => {\r\n        fetchDashboardData();\r\n    }, []);\r\n\r\n    const fetchDashboardData = async () => {\r\n        try {\r\n            const { data: transactions } = await supabase\r\n                .from('expenses')\r\n                .select('*')\r\n                .order('date', { ascending: true });\r\n\r\n            if (transactions) {\r\n                const income = transactions.filter(t => t.type === 'income').reduce((sum, t) => sum + Number(t.amount), 0);\r\n                const expense = transactions.filter(t => t.type === 'expense').reduce((sum, t) => sum + Number(t.amount), 0);\r\n\r\n                setStats(prev => ({\r\n                    ...prev,\r\n                    totalIncome: income,\r\n                    totalExpenses: expense\r\n                }));\r\n\r\n                // Expense by category pie chart\r\n                const expOnly = transactions.filter(t => t.type === 'expense');\r\n                const grouped = expOnly.reduce((acc: any, t) => {\r\n                    acc[t.category] = (acc[t.category] || 0) + Number(t.amount);\r\n                    return acc;\r\n                }, {});\r\n                setExpenseData(Object.entries(grouped).map(([name, value]) => ({ name, value })));\r\n\r\n                // Income vs Expense comparison\r\n                setFlowData([\r\n                    { name: 'Income', value: income, color: '#10b981' },\r\n                    { name: 'Expense', value: expense, color: '#ef4444' }\r\n                ]);\r\n            }\r\n\r\n            const { data: tasks } = await supabase.from('tasks').select('*');\r\n            if (tasks) {\r\n                const active = tasks.filter(t => t.status !== 'done').length;\r\n                const completed = tasks.filter(t => t.status === 'done').length;\r\n                setStats(prev => ({\r\n                    ...prev,\r\n                    activeTasks: active,\r\n                    completionRate: tasks.length > 0 ? Math.round((completed / tasks.length) * 100) : 0\r\n                }));\r\n            }\r\n\r\n            const today = new Date().toISOString().split('T')[0];\r\n            const { count } = await supabase\r\n                .from('meals')\r\n                .select('*', { count: 'exact', head: true })\r\n                .gte('timestamp', `${today}T00:00:00`)\r\n                .lte('timestamp', `${today}T23:59:59`);\r\n\r\n            setStats(prev => ({ ...prev, mealsToday: count || 0 }));\r\n        } catch (error) {\r\n            console.error('Error fetching dashboard data:', error);\r\n        }\r\n    };\r\n\r\n    const COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899'];\r\n\r\n    return (\r\n        <div className=\"space-y-8 animate-in fade-in duration-500\">\r\n            <div className=\"flex flex-col gap-1\">\r\n                <h2 className=\"text-3xl font-bold tracking-tight\">Dashboard</h2>\r\n                <p className=\"text-muted-foreground\">Overview of your productivity and finances.</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6\">\r\n                <StatCard\r\n                    title=\"Balance\"\r\n                    value={formatCurrency(stats.totalIncome - stats.totalExpenses)}\r\n                    icon={Wallet}\r\n                    trend=\"Current\"\r\n                    trendUp={true}\r\n                />\r\n                <StatCard\r\n                    title=\"Income\"\r\n                    value={formatCurrency(stats.totalIncome)}\r\n                    icon={ArrowUpCircle}\r\n                    trend=\"Monthly\"\r\n                    trendUp={true}\r\n                    color=\"text-emerald-500 bg-emerald-500/10\"\r\n                />\r\n                <StatCard\r\n                    title=\"Tasks\"\r\n                    value={stats.activeTasks.toString()}\r\n                    icon={CheckCircle2}\r\n                    trend=\"Active\"\r\n                    trendUp={false}\r\n                />\r\n                <StatCard\r\n                    title=\"Progress\"\r\n                    value={`${stats.completionRate}%`}\r\n                    icon={Zap}\r\n                    trend=\"Overall\"\r\n                    trendUp={true}\r\n                />\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 md:gap-8\">\r\n                {/* Flow Chart */}\r\n                <div className=\"bg-card p-6 rounded-3xl border border-border shadow-sm flex flex-col\">\r\n                    <div className=\"flex items-center gap-2 mb-8\">\r\n                        <div className=\"p-2 bg-primary/10 rounded-xl text-primary\">\r\n                            <TrendingUp size={20} />\r\n                        </div>\r\n                        <h3 className=\"text-lg font-bold\">Income vs Expenses</h3>\r\n                    </div>\r\n                    <div className=\"h-[300px] w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <BarChart data={flowData}>\r\n                                <CartesianGrid strokeDasharray=\"3 3\" vertical={false} stroke=\"hsl(var(--border))\" />\r\n                                <XAxis dataKey=\"name\" axisLine={false} tickLine={false} fontSize={12} fontWeight=\"bold\" />\r\n                                <YAxis axisLine={false} tickLine={false} fontSize={12} />\r\n                                <Tooltip\r\n                                    cursor={{ fill: 'hsl(var(--muted))', opacity: 0.4 }}\r\n                                    contentStyle={{\r\n                                        backgroundColor: 'hsl(var(--card))',\r\n                                        borderColor: 'hsl(var(--border))',\r\n                                        borderRadius: '16px',\r\n                                        boxShadow: '0 10px 15px -3px rgb(0 0 0 / 0.1)'\r\n                                    }}\r\n                                />\r\n                                <Bar dataKey=\"value\" radius={[12, 12, 0, 0]}>\r\n                                    {flowData.map((entry, index) => (\r\n                                        <Cell key={`cell-${index}`} fill={entry.color} />\r\n                                    ))}\r\n                                </Bar>\r\n                            </BarChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Expense Category Chart */}\r\n                <div className=\"bg-card p-6 rounded-3xl border border-border shadow-sm flex flex-col\">\r\n                    <div className=\"flex items-center gap-2 mb-8\">\r\n                        <div className=\"p-2 bg-red-500/10 rounded-xl text-red-500\">\r\n                            <ArrowDownCircle size={20} />\r\n                        </div>\r\n                        <h3 className=\"text-lg font-bold\">Expense Distribution</h3>\r\n                    </div>\r\n                    <div className=\"h-[300px] w-full\">\r\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\r\n                            <PieChart>\r\n                                <Pie\r\n                                    data={expenseData}\r\n                                    cx=\"50%\"\r\n                                    cy=\"50%\"\r\n                                    innerRadius={70}\r\n                                    outerRadius={100}\r\n                                    paddingAngle={8}\r\n                                    dataKey=\"value\"\r\n                                >\r\n                                    {expenseData.map((_, index) => (\r\n                                        <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\r\n                                    ))}\r\n                                </Pie>\r\n                                <Tooltip\r\n                                    contentStyle={{\r\n                                        backgroundColor: 'hsl(var(--card))',\r\n                                        borderColor: 'hsl(var(--border))',\r\n                                        borderRadius: '16px'\r\n                                    }}\r\n                                />\r\n                                <Legend iconType=\"circle\" />\r\n                            </PieChart>\r\n                        </ResponsiveContainer>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction StatCard({ title, value, icon: Icon, trend, trendUp, color }: any) {\r\n    return (\r\n        <div className=\"bg-card p-6 rounded-3xl border border-border shadow-sm hover:shadow-xl transition-all duration-300 group\">\r\n            <div className=\"flex items-center justify-between mb-5\">\r\n                <div className={cn(\"p-3 rounded-2xl transition-colors\", color || \"bg-primary/10 text-primary\")}>\r\n                    <Icon size={24} />\r\n                </div>\r\n                <div className={cn(\r\n                    \"text-[10px] font-black px-3 py-1 rounded-full uppercase tracking-widest border transition-all\",\r\n                    trendUp ? \"bg-emerald-500/10 text-emerald-500 border-emerald-500/20\" : \"bg-red-500/10 text-red-500 border-red-500/20\"\r\n                )}>\r\n                    {trend}\r\n                </div>\r\n            </div>\r\n            <div>\r\n                <p className=\"text-xs text-muted-foreground font-bold uppercase tracking-widest mb-1 group-hover:text-primary transition-colors\">{title}</p>\r\n                <h4 className=\"text-2xl font-black tracking-tight\">{value}</h4>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 515, "column": 0}, "map": {"version":3,"sources":["file:///D:/Projects/Persnl/src/app/%28dashboard%29/page.tsx"],"sourcesContent":["'use client';\r\nimport Dashboard from \"../../pages/Dashboard\";\r\nexport default function Page() {\r\n    return <Dashboard />;\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AADA;;;AAEe,SAAS;IACpB,qBAAO,8OAAC,qIAAS;;;;;AACrB"}}]
}