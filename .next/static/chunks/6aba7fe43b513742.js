(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,u)=>{"use strict";Object.defineProperty(u,"__esModule",{value:!0}),Object.defineProperty(u,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},32341,e=>{"use strict";var t=e.i(43476),u=e.i(71645),s=e.i(7471);let l=(0,u.createContext)(void 0);function r({children:e}){let[r,a]=(0,u.useState)(null),[i,n]=(0,u.useState)(null),[o,c]=(0,u.useState)(!0),d=async(e,t)=>{let{data:u,error:l}=await s.supabase.from("profiles").select("*").eq("id",e).single();if(l&&"PGRST116"===l.code){let{data:u,error:l}=await s.supabase.from("profiles").insert([{id:e,full_name:t?.split("@")[0]||"User",role:"child"}]).select().single();!l&&u&&n(u)}else!l&&u&&n(u)};(0,u.useEffect)(()=>{s.supabase.auth.getSession().then(({data:{session:e}})=>{let t=e?.user??null;a(t),t&&d(t.id,t.email),c(!1)});let{data:{subscription:e}}=s.supabase.auth.onAuthStateChange((e,t)=>{let u=t?.user??null;a(u),u?d(u.id,u.email):n(null),c(!1)});return()=>e.unsubscribe()},[]);let h=async()=>{await s.supabase.auth.signOut(),n(null)};return(0,t.jsx)(l.Provider,{value:{user:r,profile:i,loading:o,signOut:h},children:e})}e.s(["AuthProvider",()=>r,"useAuth",0,()=>{let e=(0,u.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}])}]);