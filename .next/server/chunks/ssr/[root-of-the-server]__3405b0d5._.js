module.exports=[14619,a=>{"use strict";let b=(0,a.i(64375).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],14619)},78856,a=>{"use strict";let b=(0,a.i(64375).default)("wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);a.s(["Wallet",()=>b],78856)},53173,a=>a.a(async(b,c)=>{try{a.i(8171);var d=a.i(27669),e=a.i(81462),f=b([e]);[e]=f.then?(await f)():f;let g=(0,d.createContext)(void 0);a.s(["useAuth",0,()=>{let a=(0,d.useContext)(g);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}]),c()}catch(a){c(a)}},!1),93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},16928,a=>a.a(async(b,c)=>{try{let b=await a.y("@supabase/supabase-js-13bdb2f0966edf07");a.n(b),c()}catch(a){c(a)}},!0),81462,a=>a.a(async(b,c)=>{try{var d=a.i(16928),e=b([d]);[d]=e.then?(await e)():e;let f=(0,d.createClient)("https://knrxlukfurxqbrohaziz.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtucnhsdWtmdXJ4cWJyb2hheml6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njk2MjAzNTksImV4cCI6MjA4NTE5NjM1OX0.EDVRZsoOuUYteLHF8ScFCTWK6PYvJq10kHFWBmKNf-4");a.s(["supabase",0,f]),c()}catch(a){c(a)}},!1),64375,a=>{"use strict";var b=a.i(27669);let c=(...a)=>a.filter((a,b,c)=>!!a&&""!==a.trim()&&c.indexOf(a)===b).join(" ").trim(),d=a=>{let b=a.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,b,c)=>c?c.toUpperCase():b.toLowerCase());return b.charAt(0).toUpperCase()+b.slice(1)};var e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let f=(0,b.forwardRef)(({color:a="currentColor",size:d=24,strokeWidth:f=2,absoluteStrokeWidth:g,className:h="",children:i,iconNode:j,...k},l)=>(0,b.createElement)("svg",{ref:l,...e,width:d,height:d,stroke:a,strokeWidth:g?24*Number(f)/Number(d):f,className:c("lucide",h),...!i&&!(a=>{for(let b in a)if(b.startsWith("aria-")||"role"===b||"title"===b)return!0;return!1})(k)&&{"aria-hidden":"true"},...k},[...j.map(([a,c])=>(0,b.createElement)(a,c)),...Array.isArray(i)?i:[i]])),g=(a,e)=>{let g=(0,b.forwardRef)(({className:g,...h},i)=>(0,b.createElement)(f,{ref:i,iconNode:e,className:c(`lucide-${d(a).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${a}`,g),...h}));return g.displayName=d(a),g};a.s(["default",()=>g],64375)},33332,a=>a.a(async(b,c)=>{try{let b=await a.y("clsx-3fe5bd38fe94348f");a.n(b),c()}catch(a){c(a)}},!0),6177,a=>a.a(async(b,c)=>{try{let b=await a.y("tailwind-merge-556f03ff0562c00b");a.n(b),c()}catch(a){c(a)}},!0),99856,a=>a.a(async(b,c)=>{try{var d=a.i(33332),e=a.i(6177),f=b([d,e]);function g(...a){return(0,e.twMerge)((0,d.clsx)(a))}function h(a){return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}function i(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(a)}[d,e]=f.then?(await f)():f,a.s(["cn",()=>g,"formatCurrency",()=>i,"formatDate",()=>h]),c()}catch(a){c(a)}},!1),57026,a=>{"use strict";let b=(0,a.i(64375).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);a.s(["CheckCircle2",()=>b],57026)},11988,a=>{"use strict";let b=(0,a.i(64375).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],11988)},23028,a=>{"use strict";let b=(0,a.i(64375).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],23028)},89840,a=>{"use strict";let b=(0,a.i(64375).default)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);a.s(["Activity",()=>b],89840)},55594,a=>{"use strict";let b=(0,a.i(64375).default)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);a.s(["ArrowRight",()=>b],55594)},57143,a=>{"use strict";let b=(0,a.i(64375).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],57143)},81473,a=>{"use strict";let b=(0,a.i(64375).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],81473)},54917,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(81462),g=a.i(53173),h=a.i(23028),i=a.i(89840),j=a.i(57026),k=a.i(78856),l=a.i(14619),m=a.i(55594),n=a.i(57143),o=a.i(81473),p=a.i(11988),q=a.i(99856),r=b([f,g,q]);function s(){let{user:a}=(0,g.useAuth)(),[b,c]=(0,e.useState)([]),[r,s]=(0,e.useState)(null),[u,v]=(0,e.useState)(null),[w,x]=(0,e.useState)(!0),[y,z]=(0,e.useState)(""),[A,B]=(0,e.useState)(!1),[C,D]=(0,e.useState)(null);(0,e.useEffect)(()=>{a&&E()},[a]),(0,e.useEffect)(()=>{r&&F(r)},[r]);let E=async()=>{try{let{data:b,error:d}=await f.supabase.from("family_links").select(`
                    child_id,
                    profiles:child_id (id, full_name)
                `).eq("parent_id",a?.id);if(d)throw d;let e=b.map(a=>({id:a.profiles.id,full_name:a.profiles.full_name}));c(e),e.length>0&&!r&&s(e[0].id)}catch(a){console.error("Error fetching children:",a)}finally{x(!1)}},F=async a=>{try{let{data:b}=await f.supabase.from("expenses").select("amount, type").eq("user_id",a),c=b?.filter(a=>"expense"===a.type).reduce((a,b)=>a+Number(b.amount),0)||0,{data:d}=await f.supabase.from("tasks").select("status").eq("user_id",a),e=d?.filter(a=>"done"!==a.status).length||0,g=d?.filter(a=>"done"===a.status).length||0,h=d?.length||0,i=h>0?Math.round(g/h*100):0,j=new Date().toISOString().split("T")[0],{count:k}=await f.supabase.from("meals").select("*",{count:"exact",head:!0}).eq("user_id",a).gte("timestamp",`${j}T00:00:00`);v({totalExpenses:c,activeTasks:e,completionRate:i,mealsToday:k||0})}catch(a){console.error("Error fetching child stats:",a)}},G=async b=>{b.preventDefault(),B(!0),D(null);try{let{data:b,error:c}=await f.supabase.from("profiles").select("id, role").eq("full_name",y).eq("role","child").single();if(c||!b)throw Error("Child not found. Make sure the name is correct and they have a Child account.");let{error:d}=await f.supabase.from("family_links").insert([{parent_id:a?.id,child_id:b.id}]);if(d){if("23505"===d.code)throw Error("You are already linked to this child.");throw d}z(""),E()}catch(a){D(a.message)}finally{B(!1)}};return w?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,d.jsx)(p.Loader2,{className:"animate-spin text-primary",size:32})}):(0,d.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,d.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,d.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Parental Dashboard"}),(0,d.jsx)("p",{className:"text-muted-foreground",children:"Monitor and manage your children's activities."})]}),(0,d.jsxs)("form",{onSubmit:G,className:"flex gap-2",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",size:16}),(0,d.jsx)("input",{type:"text",placeholder:"Child's username...",value:y,onChange:a=>z(a.target.value),className:"pl-9 pr-4 py-2 bg-card border border-border rounded-xl focus:ring-2 focus:ring-primary outline-none transition-all w-full md:w-64"})]}),(0,d.jsx)("button",{type:"submit",disabled:A||!y,className:"bg-primary text-primary-foreground p-2 rounded-xl hover:bg-primary/90 disabled:opacity-50 transition-colors",children:A?(0,d.jsx)(p.Loader2,{className:"animate-spin",size:20}):(0,d.jsx)(o.UserPlus,{size:20})})]})]}),C&&(0,d.jsx)("div",{className:"p-3 rounded-xl bg-destructive/10 text-destructive text-sm font-medium",children:C}),0===b.length?(0,d.jsxs)("div",{className:"bg-card border-2 border-dashed border-border rounded-3xl p-12 text-center",children:[(0,d.jsx)("div",{className:"w-16 h-16 bg-primary/10 text-primary rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,d.jsx)(h.Users,{size:32})}),(0,d.jsx)("h3",{className:"text-xl font-bold mb-2",children:"No children linked yet"}),(0,d.jsx)("p",{className:"text-muted-foreground max-w-sm mx-auto",children:"Link your child's account using their username to start monitoring their tasks, expenses, and meals."})]}):(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[(0,d.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,d.jsx)("h3",{className:"text-sm font-bold uppercase tracking-widest text-muted-foreground px-2",children:"Your Family"}),(0,d.jsx)("div",{className:"space-y-2",children:b.map(a=>(0,d.jsxs)("button",{onClick:()=>s(a.id),className:(0,q.cn)("w-full flex items-center justify-between p-4 rounded-2xl border transition-all group",r===a.id?"bg-primary border-primary text-primary-foreground shadow-lg shadow-primary/20":"bg-card border-border hover:border-primary/50 text-card-foreground"),children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:(0,q.cn)("w-10 h-10 rounded-xl flex items-center justify-center font-bold text-lg",r===a.id?"bg-primary-foreground/20":"bg-primary/10 text-primary"),children:a.full_name[0].toUpperCase()}),(0,d.jsx)("span",{className:"font-bold",children:a.full_name})]}),(0,d.jsx)(m.ArrowRight,{size:18,className:(0,q.cn)("transition-transform group-hover:translate-x-1",r===a.id?"opacity-100":"opacity-0")})]},a.id))})]}),(0,d.jsx)("div",{className:"lg:col-span-3 space-y-8",children:r&&u&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,d.jsx)(t,{title:"Total Spent",value:(0,q.formatCurrency)(u.totalExpenses),icon:k.Wallet,color:"text-red-500 bg-red-500/10"}),(0,d.jsx)(t,{title:"Active Tasks",value:u.activeTasks.toString(),icon:j.CheckCircle2,color:"text-blue-500 bg-blue-500/10"}),(0,d.jsx)(t,{title:"Completion",value:`${u.completionRate}%`,icon:i.Activity,color:"text-emerald-500 bg-emerald-500/10"}),(0,d.jsx)(t,{title:"Meals Today",value:u.mealsToday.toString(),icon:l.Calendar,color:"text-amber-500 bg-amber-500/10"})]}),(0,d.jsxs)("div",{className:"bg-card rounded-3xl border border-border p-8 text-center",children:[(0,d.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Activity Log (Coming Soon)"}),(0,d.jsxs)("p",{className:"text-muted-foreground",children:["Detailed activity logging and reports for ",b.find(a=>a.id===r)?.full_name," will be available here."]})]})]})})]})]})}function t({title:a,value:b,icon:c,color:e}){return(0,d.jsxs)("div",{className:"bg-card p-6 rounded-3xl border border-border shadow-sm flex flex-col gap-4",children:[(0,d.jsx)("div",{className:(0,q.cn)("w-12 h-12 rounded-2xl flex items-center justify-center",e),children:(0,d.jsx)(c,{size:24})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-muted-foreground font-bold uppercase tracking-widest mb-1",children:a}),(0,d.jsx)("h4",{className:"text-2xl font-black tracking-tight",children:b})]})]})}[f,g,q]=r.then?(await r)():r,a.s(["default",()=>s]),c()}catch(a){c(a)}},!1),56413,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(6555),i=a.i(54917),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/ParentDashboard",pathname:"/ParentDashboard",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/ParentDashboard",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__3405b0d5._.js.map